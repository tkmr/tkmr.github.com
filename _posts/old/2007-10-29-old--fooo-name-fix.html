---
layout: old_post
title: fooo.name バグFIXと機能追加
permalink: /tatsuya/show/404-fooo-name-fix
---
バグFIXと機能追加。<br />サイト情報も少しずつ溜まってきたので、サイト情報検索を作った。アカウント情報検索とほぼ同じ<br /><br /><br />サイト情報検索 http://fooo.name/sites/search/{検索したいURL}<br />アカウント情報検索 http://fooo.name/accounts/search/{検索したいURL}<br /><br /><br />複数件ヒットした場合は、複数結果として返る。<br />例えば、ffffound.comを検索してXML形式で取得するなら<br /><br />GET http://fooo.name/sites/search/http://ffffound.com?format=xml<br /><br />&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;sites&gt;<br />&nbsp; &lt;site&gt;<br />&nbsp;&nbsp;&nbsp; &lt;created-on type="datetime"&gt;2007-10-14T12:19:22+00:00&lt;/created-on&gt;<br />&nbsp;&nbsp;&nbsp; &lt;favicon-url&gt;http://ffffound.com/favicon.ico&lt;/favicon-url&gt;<br />&nbsp;&nbsp;&nbsp; &lt;id type="integer"&gt;110&lt;/id&gt;<br />&nbsp;&nbsp;&nbsp; &lt;name&gt;FFFFOUND!&lt;/name&gt;<br />&nbsp;&nbsp;&nbsp; &lt;pattern&gt;http://ffffound.com/home/[name]/found/&lt;/pattern&gt;<br />&nbsp;&nbsp;&nbsp; &lt;updated-on type="datetime"&gt;2007-10-14T12:19:25+00:00&lt;/updated-on&gt;<br />&nbsp;&nbsp;&nbsp; &lt;url&gt;http://ffffound.com/&lt;/url&gt;<br />&nbsp; &lt;/site&gt;<br />&lt;/sites&gt;<br /><br /><pattern>がアカウント名のパターンなので<br /></pattern><br />pattern = Regexp.new("http://ffffound.com/home/[name]/found/".gsub(/\[name\]/, "([^/]*)"))<br />acount = "http://ffffound.com/home/hogehoge/found/".scan(pattern)[0][0]<br /><br />http://ffffound.com/home/hogehoge/found/ からアカウント名 hogehoge を取り出せる。<br /><br />でこれを使って「OPMLのURLと探したいサービスのURLを入れれば、そのサービスを使ってる人のOPMLが出てくる」みたいな処理作れば、色々応用できないかな。例のOPMLからTwitter購読の応用として<br /><br />OPML2OPMLみたいな

